# CorteCerto – Controle simples de perdas na colheita de cana

Projeto **iniciante** em Python para registrar operações de colheita de cana-de-açúcar, **estimar perdas**, gerar **relatórios em TXT**, salvar dados em **JSON** e (opcionalmente) enviar os registros para um banco **Oracle**.

> 🧭 Tema do Agronegócio: **Perdas na colheita de cana** – dor recorrente que reduz produtividade e margens.  
> 🎯 Objetivo: dar visibilidade rápida das perdas por talhão/equipe/colhedora e sugerir ações simples de melhoria.

---

## Como este projeto atende a disciplina (Cap. 3–6)

- **Subalgoritmos (funções e procedimentos, com parâmetros):** ver `src/*.py` (ex.: `add_operacao`, `calcular_kpis`, `gerar_relatorio_txt`).
- **Estruturas de dados:** listas, tuplas e dicionários (lista de operações como “tabela” em memória).
- **Manipulação de arquivos:** leitura/gravação **JSON** (`data/operacoes.json`) e geração de **TXT** em `reports/`.
- **Conexão com banco de dados (Oracle):** módulo `oracle_db.py` com exemplo usando `cx_Oracle` (**opcional**).
  - O sistema roda mesmo **sem Oracle**; se quiser integrar, preencha `data/config.json` e ative o envio.

---

## Cenário simples (o que o app faz)

1. Cadastrar operação de colheita: data, talhão, equipe, colhedora e **estimativa de perda (%)**.
2. Listar operações e **KPIs** (média de perdas por talhão/equipe/colhedora).
3. Gerar **relatório TXT** com ranking e **sugestões de melhoria** (boas práticas).
4. (Opcional) Enviar registros para **Oracle** (INSERT) quando configurado.

> **Obs.** Estimativa de perda pode vir de amostragens simples em campo (ex.: sacos coletados de pontas/perdas) – aqui digitada manualmente para ser **iniciante**.

---

## Como rodar

### 1) Pré-requisitos
- Python 3.9+
- (Opcional) Oracle Client + `cx_Oracle` se quiser integração com banco.

### 2) Instalar dependências
```bash
pip install -r requirements.txt
```

> Se **não** for usar Oracle, você pode comentar/remover `cx_Oracle` do `requirements.txt`.

### 3) Executar
```bash
python src/main.py
```

### 4) (Opcional) Oracle
- Edite `data/config.json`:
```json
{
  "oracle": {
    "enabled": false,
    "dsn": "host:porta/servico",
    "user": "USUARIO",
    "password": "SENHA",
    "table": "OPERACOES_COLHEITA"
  }
}
```
- Crie a tabela (exemplo):
```sql
CREATE TABLE OPERACOES_COLHEITA (
  ID           NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
  DATA         DATE,
  TALHAO       VARCHAR2(100),
  EQUIPE       VARCHAR2(100),
  COLHEDORA    VARCHAR2(100),
  PERDA_PCT    NUMBER(5,2),
  OBSERVACOES  VARCHAR2(400)
);
```

---

## Estrutura do repositório

```
agro-colheita-simples/
├─ README.md
├─ requirements.txt
├─ data/
│  ├─ operacoes.json
│  └─ config.json
├─ reports/
│  └─ exemplo-relatorio.txt
└─ src/
   ├─ main.py
   ├─ models.py
   ├─ storage.py
   ├─ reports.py
   ├─ validators.py
   ├─ oracle_db.py
   └─ menus.py
```

---

## Fluxo (linha lógica clara)

1. **Menu** → usuário escolhe ação (cadastrar, listar, KPIs, relatório, enviar p/ Oracle).
2. **Validação** → entrada de dados com checagem de tipos/intervalos.
3. **Armazenamento** → salva/consulta em `operacoes.json` (lista de dicionários).
4. **KPIs/Relatório** → funções processam a “tabela” em memória e geram TXT.
5. **Oracle (opcional)** → envia registros pendentes por INSERT.

---

## Usabilidade
- CLI simples e direta (sem dependências pesadas).
- Textos claros e validação para evitar erros comuns.
- Relatório pronto em `reports/` para anexar no trabalho.

---

## Inovação (nível iniciante)
- Foco em **visibilidade rápida** de perdas e **sugestões automáticas** (boas práticas).
- Podem evoluir depois com sensores/IoT, visão computacional etc. (fora do escopo iniciante).

---

## Licença
MIT
